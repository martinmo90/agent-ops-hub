# Purpose: Always produce the required check context named
# "Baseline Guard / verifyExpected" on PRs and merge queue, WITHOUT executing PR code.
# This removes "Waiting for status to be reported" blocks.

name: Baseline Guard
on:
  pull_request_target:
    types: [opened, synchronize, reopened, ready_for_review]
  merge_group:
  workflow_dispatch:

permissions:
  contents: read

# Avoid duplicate runs spamming the checks list
concurrency:
  group: baseline-guard-${{ github.workflow }}-${{ github.event.pull_request.number || github.run_id }}
  cancel-in-progress: true

jobs:
  # IMPORTANT: job name must remain exactly "verifyExpected" to match branch-protection context
  verifyExpected:
    name: verifyExpected
    runs-on: ubuntu-latest
    if: always()
    steps:
      # DO NOT check out PR code in pull_request_target for security.
      - run: echo "Compat status emitted from base repo (no PR code executed)."
